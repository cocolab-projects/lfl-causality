<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="description" content="">
    <meta name="author" content="">
    <link rel="icon" href="/favicon.ico">

    <title>Learning Experiment</title>

    <!-- Bootstrap core CSS & theme -->
    <link href="../../_shared/css/bootstrap.min.css" rel="stylesheet">
    <link href="../../_shared/css/bootstrap-theme.min.css" rel="stylesheet">

  </head>
  <body role="document">
    <div class="container theme-showcase" role="main">
      <br>
      <div class="progress">
        <div class="progress-bar" role="progressbar" aria-valuenow="5"
        aria-valuemin="0" aria-valuemax="100" style="width: 5%;">
          <span class="sr-only">5% Complete</span>
        </div>
      </div>  
      
      <div class="page-header">
        <h1>Instructions</h1>
      </div>
      <div class="well" style="width:800px; margin: 0 auto">
        <h2><center>Instructions</center></h2>
        <p>
          <b>Logistics: </b>In the game, you are guaranteed to be paired with another player and assigned the role of "explorer" or "student". 
          <br><br>
          <b>Scenario: </b>In this HIT, imagine that you and your partner are employees of "ChemCo", a company 
          which studies chemicals on other planets. Your goal in this HIT is to learn how 
          to identify the causes of chemical reactions. 
          
          <br> <br>
          <b>Explorer:</b> If you are the explorer, you will be able to interact with chemicals to learn about
          what type of reactions occur. 
          When you are ready to proceed, you will continue to a chatroom where you communicate your
          findings about the chemicals to your student partner. Once the student feels confident in
          their understanding of the chemicals, they will progress the game forward.
          You will then be given a series of around 10 questions about the chemicals. Once you have finished
          with one set of chemicals, you will continue, repeating this process 
          (exploration, chatroom communication, assessment) for a total of 3 different groups of chemicals.
          <br> <br>
          <b>Student:</b> If you are the student, you will first wait for 1-2 minutes until the explorer
          has examined the chemicals completely.
          Then you both will enter a chatroom, where you can discuss the properties of the chemicals
          with the explorer as long as you need. Once you feel you have a good understanding of the
          chemical properties (you may chat as long as you want) you will continue from the chatroom. 
          You will then be given a series of around 10 questions about the chemicals. Once you have finished
          with one set of chemicals, you will continue, repeating this process 
          (waiting for the explorer, chatroom communication, assessment) for a total of 3 different groups of chemicals.
          <br> <br>
          <b>Bonus:</b> At the end of each test grid, you will receive a
          score:
          (# of questions correctly answered)
          At the very end, we will sum together your scores across the rounds with
          <b>your partner's scores</b> across the rounds. This will be the total score for both players.
          You will each get <b> a bonus of $0.01 per point</b>, so pay attention and communicate effectively
          with your partner during the chatroom!
        </p>

        <p> A few final notes: you may see this screen before the game begins:
          <p>
            <center><img src="../../_shared/images/waitroom.png" alt="initial wait screen" style="width:700px;height:150px">
            </center>
          </p>
          Just hold tight. In order to proceed with the hit you will
          need another player. This player should join the game automatically within
          the next few minutes. If you're in the waiting room 15 minutes
          without another player joining, please email us to let us know
          (cmacavoy@stanford.edu).
        </p>

        <p>
          Second, please be respectful of the worker you're playing
          with: try to be as responsive as possible.
        </p>

        <p>
          Finally, please DO NOT refresh the page at any point once
          you start the game (including the waiting page). If you
          refresh, you will not be able to rejoin the game you were in
          and you may not be able to submit the HIT. Similarly, DO NOT
          exit this tab once the game opens in another tab. This tab must be
          open for the HIT to submit.<br> Thank you!
        </p>

        <h3>
          Please fill out this short quiz below before getting started.
          Good luck and have fun!
        </h3>
      </div>

      <div class="page-header">
        <h3>Comprehension Quiz</h3>
      </div>
      <div class="well" style="width:800px; margin: 0 auto">
        <br>
        During the game, you are guaranteed to be paired with another player.
        <br>
        <input type="radio" name="matched" value="yes"> True
        <br>
        <input type="radio" name="matched" value="no"> False
        <br>
              
        <br>
        Players will have as much time in the chatroom as they want, to discuss what they learned with their partner.
        <br>
        <input type="radio" name="mgoal" value="yes"> True
        <br>
        <input type="radio" name="mgoal" value="no"> False
        <br>

        <br>
        My bonus is dependent solely on my performance and not my partnerâ€™s.
        <br>
        <input type="radio" name="comp" value="no"> True
        <br>
        <input type="radio" name="comp" value="yes"> False
        <br>

        <br>
        Have you participated in this study before?
        <br>
        <input type="radio" name="completed" value="no"> Yes
        <br>
        <input type="radio" name="completed" value="yes"> No
        <br>

        <br>
        <input id="quiz_submit" type="submit" value="Submit">
        <br>
        <br>
        <div class="error" style="display:none"> <font color="red" size="5"><b>Ooops! Looks like you made a mistake. You have one more chance to get the answers correct.</b> </font>
        </div>
      </div> <!-- /container -->
    </div>

    <!-- Bootstrap core JavaScript
    ================================================== -->
    <!-- Placed at the end of the document so the pages load faster -->
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.1/jquery.min.js"></script>
    <script src="../../_shared/js/bootstrap.min.js"></script>

    <script type="text/javascript">
      $('html,body').scrollTop(0);
      var urlParams;
	    var match,
	      pl     = /\+/g,  // Regex for replacing addition symbol with a space
	      search = /([^&=]+)=?([^&]*)/g,
	      decode = function (s) { return decodeURIComponent(s.replace(pl, " ")); },
	      query  = location.search.substring(1);

        urlParams = {};
        while (match = search.exec(query))
        urlParams[decode(match[1])] = decode(match[2]);
        var counter = 0;
        document.getElementById("quiz_submit").onclick = function () {
          var ans1 = $('input[name="matched"]:checked').val();
          var ans2 = $('input[name="mgoal"]:checked').val();
          var ans4 = $('input[name="comp"]:checked').val();
          var ans5 = $('input[name="completed"]:checked').val();
          if(ans1 == "yes" && ans2 == "yes" &&
            ans4 == "yes" && ans5 == "yes") {
            var workerId = urlParams.workerId;
            var assignmentId = urlParams.assignmentId;
            var hitId = urlParams.hitId;
            var turkSubmitTo = urlParams.turkSubmitTo;
            location.replace("./pass.html?workerId=" + workerId
                              + "&assignmentId=" + assignmentId
                              + "&hitId=" + hitId + "&turkSubmitTo=" + turkSubmitTo);
          } else if(counter == 3) {
            location.replace("./fail.html");
          } else {
            $('.error').show()
            counter += 1;
          }
        };
    </script>
    <script src="./validate-form.js"></script>

  </body>
</html>
